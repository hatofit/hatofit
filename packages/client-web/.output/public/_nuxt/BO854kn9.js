import{_ as ue}from"./CSiqqgES.js";import{_ as de,m as Z,g as j,h as q,U as P,k as L,l as W,n as i,r as g,o as h,c as k,s as ne,a as n,x as E,t as p,X as ce,Y as le,z as D,y as T,v as se,d as me,aW as be,aL as ve,ab as M,C as fe,H as pe,b as B,w as $,F as G,A as I,I as V}from"./C4oi7rqb.js";import{u as xe}from"./DW00qQ9v.js";import{R as he}from"./DfHeqBD8.js";const ie={wrapper:"w-full flex flex-col gap-2",indicator:{container:"min-w-fit transition-all",text:"text-gray-400 dark:text-gray-500 text-end",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},meter:{base:"appearance-none block w-full bg-none overflow-y-hidden",background:"bg-gray-200 dark:bg-gray-700",color:"text-{color}-500 dark:text-{color}-400",ring:"",rounded:"rounded-full",shadow:"",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"},appearance:{inner:"[&::-webkit-meter-inner-element]:block [&::-webkit-meter-inner-element]:relative [&::-webkit-meter-inner-element]:border-none [&::-webkit-meter-inner-element]:bg-none [&::-webkit-meter-inner-element]:bg-transparent",meter:"[&::-webkit-meter-bar]:border-none [&::-webkit-meter-bar]:bg-none [&::-webkit-meter-bar]:bg-transparent",bar:"[&::-webkit-meter-optimum-value]:border-none [&::-webkit-meter-optimum-value]:bg-none [&::-webkit-meter-optimum-value]:bg-current",value:"[&::-moz-meter-bar]:border-none [&::-moz-meter-bar]:bg-none [&::-moz-meter-bar]:bg-current"},bar:{transition:"[&::-webkit-meter-optimum-value]:transition-all [&::-moz-meter-bar]:transition-all",ring:"",rounded:"[&::-webkit-meter-optimum-value]:rounded-full [&::-moz-meter-bar]:rounded-full",size:{"2xs":"[&::-webkit-meter-optimum-value]:h-px [&::-moz-meter-bar]:h-px",xs:"[&::-webkit-meter-optimum-value]:h-0.5 [&::-moz-meter-bar]:h-0.5",sm:"[&::-webkit-meter-optimum-value]:h-1 [&::-moz-meter-bar]:h-1",md:"[&::-webkit-meter-optimum-value]:h-2 [&::-moz-meter-bar]:h-2",lg:"[&::-webkit-meter-optimum-value]:h-3 [&::-moz-meter-bar]:h-3",xl:"[&::-webkit-meter-optimum-value]:h-4 [&::-moz-meter-bar]:h-4","2xl":"[&::-webkit-meter-optimum-value]:h-5 [&::-moz-meter-bar]:h-5"}}},label:{base:"flex gap-2 items-center",text:"truncate",color:"text-{color}-500 dark:text-{color}-400",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},color:{white:"text-white dark:text-black",black:"text-black dark:text-white",gray:"text-gray-500 dark:text-gray-400"},default:{size:"md",color:"primary"}},ge={wrapper:"flex flex-col gap-2 w-full",base:"flex flex-row flex-nowrap flex-shrink overflow-hidden",background:"bg-gray-200 dark:bg-gray-700",transition:"transition-all",rounded:"rounded-full",shadow:"",list:"list-disc list-inside",orientation:{"rounded-none":{left:"rounded-s-none",right:"rounded-e-none"},"rounded-sm":{left:"rounded-s-sm",right:"rounded-e-sm"},rounded:{left:"rounded-s",right:"rounded-e"},"rounded-md":{left:"rounded-s-md",right:"rounded-e-md"},"rounded-lg":{left:"rounded-s-lg",right:"rounded-e-lg"},"rounded-xl":{left:"rounded-s-xl",right:"rounded-e-xl"},"rounded-2xl":{left:"rounded-s-2xl",right:"rounded-e-2xl"},"rounded-3xl":{left:"rounded-s-3xl",right:"rounded-e-3xl"},"rounded-full":{left:"rounded-s-full",right:"rounded-e-full"}},default:{size:"md",icon:"i-heroicons-minus-20-solid"}},H=Z(j.ui.strategy,j.ui.meter,ie),ye=q({components:{UIcon:P},inheritAttrs:!1,slots:Object,props:{value:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},indicator:{type:Boolean,default:!1},label:{type:String,default:null},size:{type:String,default:()=>H.default.size,validator(e){return Object.keys(H.meter.size).includes(e)}},color:{type:String,default:()=>H.default.color,validator(e){return[...j.ui.colors,...Object.keys(H.color)].includes(e)}},icon:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:t,attrs:c}=L("meter",W(e,"ui"),H,W(e,"class"));function A(m,r,d){if(r==d)return m<r?0:100;r>d&&(d=[r,r=d][0]);const u=(m-r)/(d-r)*100;return Math.max(0,Math.min(100,u))}const v=i(()=>g(t.value.indicator.container)),z=i(()=>g(t.value.indicator.text,t.value.indicator.size[e.size])),_=i(()=>g(t.value.meter.base,t.value.meter.background,t.value.meter.ring,t.value.meter.rounded,t.value.meter.shadow,t.value.color[e.color]??t.value.meter.color.replaceAll("{color}",e.color),t.value.meter.size[e.size])),y=i(()=>g(t.value.meter.appearance.inner,t.value.meter.appearance.meter,t.value.meter.appearance.bar,t.value.meter.appearance.value)),f=i(()=>g(t.value.meter.bar.transition,t.value.meter.bar.ring,t.value.meter.bar.rounded,t.value.meter.bar.size[e.size])),C=i(()=>g(t.value.label.base,t.value.label.text,t.value.color[e.color]??t.value.label.color.replaceAll("{color}",e.color),t.value.label.size[e.size])),o=i(()=>e.min>e.max?e.max:e.min),l=i(()=>e.max<e.min?e.min:e.max),x=i(()=>A(Number(e.value),o.value,l.value));return{ui:t,attrs:c,indicatorContainerClass:v,indicatorClass:z,meterClass:_,meterAppearanceClass:y,meterBarClass:f,labelClass:C,normalizedMin:o,normalizedMax:l,percent:x}}}),we=["value","min","max"];function ke(e,t,c,A,v,z){const _=P;return h(),k("div",D({class:e.ui.wrapper},e.attrs),[e.indicator||e.$slots.indicator?ne(e.$slots,"indicator",le(D({key:0},{percent:e.percent,value:e.value})),()=>[n("div",{class:E(e.indicatorContainerClass),style:ce({width:`${e.percent}%`})},[n("div",{class:E(e.indicatorClass)},p(Math.round(e.percent))+"% ",3)],6)]):T("",!0),n("meter",{value:e.value,min:e.normalizedMin,max:e.normalizedMax,class:E([e.meterClass,e.meterAppearanceClass,e.meterBarClass])},null,10,we),e.label||e.$slots.label?ne(e.$slots,"label",le(D({key:1},{percent:e.percent,value:e.value})),()=>[n("div",{class:E(e.labelClass)},[e.icon?(h(),se(_,{key:0,name:e.icon},null,8,["name"])):T("",!0),me(" "+p(e.label),1)],2)]):T("",!0)],16)}const ze=de(ye,[["render",ke]]),F=Z(j.ui.strategy,j.ui.meter,ie),oe=Z(j.ui.strategy,j.ui.meterGroup,ge),_e=q({components:{UIcon:P},inheritAttrs:!1,slots:Object,props:{min:{type:Number,default:0},max:{type:Number,default:100},size:{type:String,default:()=>F.default.size,validator(e){return Object.keys(F.meter.bar.size).includes(e)}},indicator:{type:Boolean,default:!1},icon:{type:String,default:()=>oe.default.icon},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e,{slots:t}){const{ui:c,attrs:A}=L("meterGroup",W(e,"ui"),oe),{ui:v}=L("meter",void 0,F);if(!t.default)throw new Error("Meter Group has no Meter children.");const z=i(()=>e.min>e.max?e.max:e.min),_=i(()=>e.max<e.min?e.min:e.max),y=i(()=>be(t)),f=i(()=>c.value.orientation[c.value.rounded]);function C(s,b,a){if(b==a)return s<b?0:100;b>a&&(a=[b,b=a][0]);const w=(s-b)/(a-b)*100;return Math.max(0,Math.min(100,w))}const o=i(()=>y.value.map(s=>s.props.label)),l=i(()=>y.value.map(s=>C(s.props.value,e.min,e.max))),x=i(()=>Math.max(0,Math.max(l.value.reduce((s,b)=>s+b,0)))),m=i(()=>y.value.map((s,b)=>{var S,N,O,J,X,Y,K,Q,R,ee,te,re,ae;const a={};a.style={width:`${l.value[b]}%`},a.size=e.size,a.min=z.value,a.max=_.value,a.ui=((S=s.props)==null?void 0:S.ui)||{},a.ui.wrapper=((O=(N=s.props)==null?void 0:N.ui)==null?void 0:O.wrapper)||"",a.ui.wrapper+=[(X=(J=s.props)==null?void 0:J.ui)==null?void 0:X.wrapper,c.value.background,c.value.transition].filter(Boolean).join(" "),a.ui.meter=((K=(Y=s.props)==null?void 0:Y.ui)==null?void 0:K.meter)||{},a.ui.meter.background=`bg-${s.props.color}-500 dark:bg-${s.props.color}-400`,a.ui.meter.rounded="rounded-none",a.ui.meter.bar=((ee=(R=(Q=s.props)==null?void 0:Q.ui)==null?void 0:R.meter)==null?void 0:ee.bar)||{},b===0&&(a.ui.meter.rounded=`${f.value.left} rounded-e-none`),b===y.value.length-1&&(a.ui.meter.rounded=`${f.value.right} rounded-s-none`),o.value[b]=s.props.label;const w=ve(s,a);return(te=w.children)==null||delete te.label,(re=w.props)==null||delete re.indicator,(ae=w.props)==null||delete ae.label,w})),r=i(()=>g(c.value.base,c.value.background,c.value.rounded,c.value.shadow,v.value.meter.size[e.size])),d=i(()=>g(v.value.indicator.container)),u=i(()=>g(v.value.indicator.text,v.value.indicator.size[e.size])),U=i(()=>{const s=[void 0,M("div",{class:r.value},m.value),void 0];return e.indicator?s[0]=M("div",{class:d.value},[M("div",{class:u.value,style:{width:`${x.value}%`}},Math.round(x.value)+"%")]):t.indicator&&(s[0]=t.indicator({percent:x.value})),s[2]=M("ol",{class:c.value.list},o.value.map((b,a)=>{var S;const w=i(()=>{var N,O;return g(v.value.label.base,v.value.label.text,v.value.color[(N=m.value[a])==null?void 0:N.props.color]??v.value.label.color.replaceAll("{color}",((O=m.value[a])==null?void 0:O.props.color)??v.value.default.color),v.value.label.size[e.size])});return M("li",{class:w.value},[M(P,{name:((S=m.value[a])==null?void 0:S.props.icon)??e.icon}),`${b} (${Math.round(l.value[a])}%)`])})),s});return()=>M("div",{class:c.value.wrapper,...A.value},U.value)}}),Ce={class:"flex flex-col gap-4"},Me=n("div",{class:"flex justify-between"},[n("div",{class:"flex items-end gap-2"},[n("h2",{class:"text-xl font-semibold"},"Heart rate")])],-1),$e={class:"flex justify-around mb-6"},je={class:"text-center"},Ae={class:"mb-2"},Se={class:"text-5xl"},Ne=n("div",{class:"flex justify-between"},[n("div",{class:"flex items-end gap-2"},[n("h2",{class:"text-xl font-semibold"},"Training Intensity")])],-1),Oe={class:"border-t border-gray-500/50 py-6 mt-6"},Be=n("div",null,"Zone Summary",-1),Ve={class:"text-sm"},He={class:"text-xs"},Ue=n("div",{class:"flex justify-between"},[n("div",{class:"flex items-end gap-2"},[n("h2",{class:"text-xl font-semibold"},"Energy Expenditure")])],-1),Ee={class:"flex justify-around mb-6"},Ge={class:"text-center"},Ie={class:"mb-2"},Pe={class:"text-3xl"},We=q({__name:"StatWidget",props:{data:{type:Object,required:!0}},setup(e){const t=e,c=xe(),A=fe();function v(f,C){const o=208-.7*C,l={maximum:[.9*o,o,"90% - 100%"],anaerobic:[.8*o,.89*o,"80% - 89%"],aerobic:[.7*o,.79*o,"70% - 79%"],endurance:[.6*o,.69*o,"60% - 69%"],recovery:[.5*o,.59*o,"50% - 59%"],lifeActive:[0,.49*o,"0% - 49%"]},x=f.datasets[0].data,m={maximum:0,anaerobic:0,aerobic:0,endurance:0,recovery:0,lifeActive:0};x.forEach(u=>{u>=l.maximum[0]&&u<=l.maximum[1]?m.maximum+=1:u>=l.anaerobic[0]&&u<=l.anaerobic[1]?m.anaerobic+=1:u>=l.aerobic[0]&&u<=l.aerobic[1]?m.aerobic+=1:u>=l.endurance[0]&&u<=l.endurance[1]?m.endurance+=1:u>=l.recovery[0]&&u<=l.recovery[1]?m.recovery+=1:m.lifeActive+=1});const r=x.length,d=[];for(const[u,U]of Object.entries(m))d.push({name:u,seconds:U,percent:U/r*100,maxVal:l[u][1],minVal:l[u][0],label:`${u} ${l[u][2]}`});return console.log("intensitySummary",d),d}const z=i(()=>{const f=t.data.report.reports.find(l=>l.type==="hr");if(!f)return;const o=new he().parse(f.data);return v(o,30)}),_=f=>c().startOf("day").add(f,"seconds").format("HH:mm:ss"),y=f=>{switch(f){case 0:return"gray";case 1:return"red";case 2:return"yellow";case 3:return"green";case 4:return"green";default:return"gray"}};return(f,C)=>{const o=ue,l=ze,x=_e,m=pe("Doughnut");return h(),k("div",Ce,[B(o,null,{header:$(()=>[Me]),default:$(()=>{var r;return[n("div",$e,[(h(!0),k(G,null,I([["Age",Math.abs(Number(V(c)((r=V(A).data.value)==null?void 0:r.user.dateOfBirth).diff(V(c)(),"year")))],["Recomendation Max HR",208-.7*30]],(d,u)=>(h(),k("div",je,[n("div",Ae,p(d[0]),1),n("div",Se,p(d[1]),1)]))),256))])]}),_:1}),B(o,null,{header:$(()=>[Ne]),default:$(()=>[B(x,{min:0,max:100,size:"md",indicator:"",icon:"i-heroicons-minus"},{default:$(()=>[(h(!0),k(G,null,I(V(z),(r,d)=>(h(),se(l,{key:d,value:r.percent,color:y(d),label:`${r.label}`,icon:(r.name==="maximum"||r.name==="anaerobic"||r.name==="aerobic"||r.name==="endurance","i-heroicons-fire-20-solid")},null,8,["value","color","label","icon"]))),128))]),_:1}),n("div",Oe,[Be,(h(!0),k(G,null,I(V(z),r=>(h(),k("div",{key:r.name,class:"flex justify-between"},[n("div",Ve,p(r.name)+" ("+p(Math.round(r.minVal))+" - "+p(Math.round(r.maxVal))+"bpm) ",1),n("div",He,p(r.seconds)+"s | "+p(_(r.seconds)),1)]))),128))])]),_:1}),B(o,null,{header:$(()=>[Ue]),default:$(()=>[n("div",Ee,[(h(),k(G,null,I([{label:"Active",value:"558cal"},{label:"Afterburn",value:"100cal"}],(r,d)=>n("div",Ge,[n("div",Ie,p(r.label),1),n("div",Pe,p(r.value),1)])),64))]),n("div",null,[B(m,{data:{labels:["Afterburn","Active"],datasets:[{backgroundColor:["#41B883","#E46651"],data:[75,25]}]},options:{responsive:!0,maintainAspectRatio:!1}})])]),_:1})])}}});export{We as default};
