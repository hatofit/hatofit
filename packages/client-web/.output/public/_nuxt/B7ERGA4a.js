import{_ as K}from"./CqNsJI2Q.js";import{_ as Q,m as X,g as z,h as R,U as H,i as J,j as F,k as Y,l as ee,n as T,q as N,r as oe,o as a,c as p,a as s,s as $,v as b,x as k,y as u,z as V,d as v,t as q,F as L,A as E,B as S,C as te,D as le,E as se,G as B,H as ae,b as o,w as d,I as t,e as re}from"./B9LE8NEz.js";import{_ as ne}from"./DZMaSFZu.js";import{_ as ie}from"./DwqDLC2w.js";import{_ as de}from"./BWIbo_uo.js";import{u as ce}from"./C1xcqFkh.js";import{A}from"./C7p56BG2.js";import"./tCEg_WaZ.js";import"./vfiB1am4.js";import"./DpjbJNLR.js";const ue={wrapper:"w-full relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium",description:"mt-1 text-sm leading-4 opacity-90",actions:"flex items-center gap-2 mt-3 flex-shrink-0",shadow:"",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",icon:{base:"flex-shrink-0 w-5 h-5"},avatar:{base:"flex-shrink-0 self-center",size:"md"},color:{white:{solid:"text-gray-900 dark:text-white bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{color:"white",variant:"solid",icon:null,closeButton:null,actionButton:{size:"xs",color:"primary",variant:"link"}}},w=X(z.ui.strategy,z.ui.alert,ue),pe=R({components:{UIcon:H,UAvatar:J,UButton:F},inheritAttrs:!1,props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>w.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>w.default.closeButton},actions:{type:Array,default:()=>[]},color:{type:String,default:()=>w.default.color,validator(e){return[...z.ui.colors,...Object.keys(w.color)].includes(e)}},variant:{type:String,default:()=>w.default.variant,validator(e){return[...Object.keys(w.variant),...Object.values(w.color).flatMap(n=>Object.keys(n))].includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["close"],setup(e){const{ui:n,attrs:P}=Y("alert",ee(e,"ui"),w),l=T(()=>{var _,c;const r=((c=(_=n.value.color)==null?void 0:_[e.color])==null?void 0:c[e.variant])||n.value.variant[e.variant];return N(oe(n.value.wrapper,n.value.rounded,n.value.shadow,n.value.padding,r==null?void 0:r.replaceAll("{color}",e.color)),e.class)});function x(r){r.click&&r.click()}return{ui:n,attrs:P,alertClass:l,onAction:x,twMerge:N}}});function fe(e,n,P,l,x,r){const _=H,c=J,y=F;return a(),p("div",V({class:e.alertClass},e.attrs),[s("div",{class:k(["flex",[e.ui.gap,{"items-start":e.description||e.$slots.description,"items-center":!e.description&&!e.$slots.description}]])},[$(e.$slots,"icon",{icon:e.icon},()=>[e.icon?(a(),b(_,{key:0,name:e.icon,class:k(e.ui.icon.base)},null,8,["name","class"])):u("",!0)]),$(e.$slots,"avatar",{avatar:e.avatar},()=>[e.avatar?(a(),b(c,V({key:0},{size:e.ui.avatar.size,...e.avatar},{class:e.ui.avatar.base}),null,16,["class"])):u("",!0)]),s("div",{class:k(e.ui.inner)},[e.title||e.$slots.title?(a(),p("p",{key:0,class:k(e.ui.title)},[$(e.$slots,"title",{title:e.title},()=>[v(q(e.title),1)])],2)):u("",!0),e.description||e.$slots.description?(a(),p("div",{key:1,class:k(e.twMerge(e.ui.description,!(e.title&&e.$slots.title)&&"mt-0 leading-5"))},[$(e.$slots,"description",{description:e.description},()=>[v(q(e.description),1)])],2)):u("",!0),(e.description||e.$slots.description)&&(e.actions.length||e.$slots.actions)?(a(),p("div",{key:2,class:k(e.ui.actions)},[$(e.$slots,"actions",{},()=>[(a(!0),p(L,null,E(e.actions,(f,j)=>(a(),b(y,V({key:j,ref_for:!0},{...e.ui.default.actionButton||{},...f},{onClick:S(U=>e.onAction(f),["stop"])}),null,16,["onClick"]))),128))])],2)):u("",!0)],2),e.closeButton||!e.description&&!e.$slots.description&&e.actions.length?(a(),p("div",{key:0,class:k(e.twMerge(e.ui.actions,"mt-0"))},[!e.description&&!e.$slots.description&&(e.actions.length||e.$slots.actions)?$(e.$slots,"actions",{key:0},()=>[(a(!0),p(L,null,E(e.actions,(f,j)=>(a(),b(y,V({key:j,ref_for:!0},{...e.ui.default.actionButton||{},...f},{onClick:S(U=>e.onAction(f),["stop"])}),null,16,["onClick"]))),128))]):u("",!0),e.closeButton?(a(),b(y,V({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{onClick:n[0]||(n[0]=S(f=>e.$emit("close"),["stop"]))}),null,16)):u("",!0)],2)):u("",!0)],2)],16)}const ge=Q(pe,[["render",fe]]),me={class:"w-screen h-screen flex flex-col justify-center items-center p-4"},ye={class:"max-w-screen-xl flex flex-1 w-full max-h-[900px] overflow-hidden rounded-3xl bg-red-500 border-2 border-gray-500/50"},ve={class:"flex-1 mx-auto w-full relative flex"},we={class:"-z-0 absolute top-0 left-0 w-full h-full overflow-visible bg-blue-500"},he={class:"z-[1] flex-1 flex flex-row"},ke={class:"w-0 lg:w-2/3 flex flex-col justify-end"},be={class:"h-[100px] pb-6 pl-8 flex items-center bg-gradient-to-t from-gray-950 to-transparent"},_e={class:"w-full md:w-1/2 lg:w-1/3 flex flex-col justify-between bg-gray-50 dark:bg-gray-950 p-8"},$e={key:0,class:"flex flex-col gap-4"},Pe={class:"flex justify-end"},xe={class:"flex justify-center"},je={class:"text-gray-600 dark:text-gray-300"},Ce={key:1,class:"flex flex-col gap-4"},Oe={class:"flex gap-4"},Ve={class:"flex-1"},Se={class:"flex justify-end"},Ue={key:1,class:"flex justify-end"},Be={key:2,class:"flex flex-col gap-4"},Ae={class:"flex justify-end"},ze={class:"flex gap-4"},Je=R({__name:"login",setup(e){ce({title:"Login",description:"Login to access Hatofit"});const n=te(),P=le(),l=se({email:"",password:"",otp:""}),x=()=>{n.signIn("credentials",{redirect:!0,callbackUrl:"/dashboard"},{email:l.email,password:l.password})},r=T(()=>P.query.error==="undefined"?void 0:P.query.error),_=T(()=>r.value==="CredentialsSignin"?"Invalid email or password.":["Wrong email or password","User not found"].includes(r.value||"")?r.value:"Something went wrong, please try again later."),c=B("login"),y=B(!1),f=B(!1),j=async()=>{const m=await $fetch(A.Auth.ForgotPasswordSendOTP.url(l.email),{method:"POST"});console.log(m),y.value=!0},U=async()=>{try{const m=await $fetch(A.Auth.ForgotPasswordVerifyOTP.url(),{method:"POST",body:JSON.stringify({email:l.email,code:l.otp})});console.log(m),f.value=!0,c.value="forgot_new_password"}catch(m){console.log(m),alert("Invalid OTP"),f.value=!1,y.value=!1}},D=async()=>{try{const m=await $fetch(A.Auth.ForgotPasswordReset.url(),{method:"POST",body:JSON.stringify({email:l.email,code:l.otp,password:l.password})});console.log(m),alert("Password has been reset, please login with your new password."),f.value=!0,c.value="login"}catch(m){console.log(m),alert("Invalid OTP"),f.value=!1,y.value=!1}};return(m,i)=>{const I=K,h=F,M=re,G=ge,C=ne,O=ie,W=ae("Form"),Z=de;return a(),p("div",me,[s("div",ye,[s("div",ve,[s("div",we,[o(I,{src:"/images/scene/braden-collum-9HI8UJMSdZA-unsplash.jpg",alt:"Login",loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center"}})]),s("div",he,[s("div",ke,[s("div",be,[o(I,{src:"/images/logo/secondary-dark.png",alt:"Hatofit Logo",loading:"lazy",style:{width:"auto",height:"100%"}})])]),s("div",_e,[s("div",null,[o(M,{to:"/"},{default:d(()=>[o(h,{variant:"link",color:"primary",icon:"i-heroicons-arrow-left"},{default:d(()=>[v("back")]),_:1})]),_:1})]),t(c)==="login"?(a(),p("div",$e,[t(r)?(a(),b(G,{key:0,icon:"i-heroicons-information-circle",color:"primary",variant:"solid",title:"Error",description:t(_)},null,8,["description"])):u("",!0),o(W,{onSubmit:S(x,["prevent"]),class:"flex flex-col gap-4"},{default:d(()=>[o(O,{label:"Email",required:""},{default:d(()=>[o(C,{color:t(r)?"primary":"gray",modelValue:t(l).email,"onUpdate:modelValue":i[0]||(i[0]=g=>t(l).email=g),type:"email",placeholder:"you@example.com",icon:"i-heroicons-envelope"},null,8,["color","modelValue"])]),_:1}),o(O,{label:"Password",required:""},{default:d(()=>[o(C,{color:t(r)?"primary":"gray",modelValue:t(l).password,"onUpdate:modelValue":i[1]||(i[1]=g=>t(l).password=g),type:"password",placeholder:"your secret password",icon:"i-heroicons-lock-closed"},null,8,["color","modelValue"]),o(h,{variant:"link",class:"text-xs float-right",label:"Forgot Password?",onClick:i[2]||(i[2]=g=>c.value="forgot")})]),_:1}),s("div",Pe,[o(h,{type:"submit",variant:"solid",class:"w-full flex justify-center",size:"lg",onClick:x},{default:d(()=>[v("Login")]),_:1})]),s("div",xe,[s("p",je,[o(M,{to:"/auth/register",class:"text-primary-500"},{default:d(()=>[v("register")]),_:1}),v(" if you don't have an account. ")])])]),_:1})])):t(c)==="forgot"?(a(),p("div",Ce,[o(O,{label:"Email",required:""},{default:d(()=>[s("div",Oe,[s("div",Ve,[o(C,{color:t(r)?"primary":"gray",modelValue:t(l).email,"onUpdate:modelValue":i[3]||(i[3]=g=>t(l).email=g),type:"email",placeholder:"you@example.com",icon:"i-heroicons-envelope"},null,8,["color","modelValue"])]),s("div",null,[o(h,{size:"sm",variant:"solid",class:"w-full flex justify-center",onClick:j},{default:d(()=>[v("Send OTP")]),_:1}),s("div",Se,[o(h,{variant:"link",class:"text-xs",label:"Want To Login?",onClick:i[4]||(i[4]=g=>c.value="login")})])])])]),_:1}),t(y)?(a(),b(O,{key:0,label:"OTP",required:""},{default:d(()=>[o(C,{color:t(r)?"primary":"gray",modelValue:t(l).otp,"onUpdate:modelValue":i[5]||(i[5]=g=>t(l).otp=g),type:"text",placeholder:"OTP",icon:"i-heroicons-key"},null,8,["color","modelValue"])]),_:1})):u("",!0),t(y)?(a(),p("div",Ue,[o(h,{variant:"solid",class:"w-full flex justify-center",size:"lg",onClick:U},{default:d(()=>[v("Verify")]),_:1})])):u("",!0)])):t(c)==="forgot_new_password"?(a(),p("div",Be,[o(O,{label:"New Password",required:""},{default:d(()=>[o(C,{color:t(r)?"primary":"gray",modelValue:t(l).password,"onUpdate:modelValue":i[6]||(i[6]=g=>t(l).password=g),type:"password",placeholder:"your secret password",icon:"i-heroicons-lock-closed"},null,8,["color","modelValue"])]),_:1}),s("div",Ae,[o(h,{variant:"solid",class:"w-full flex justify-center",size:"lg",onClick:D},{default:d(()=>[v("Reset Password")]),_:1})])])):u("",!0),s("div",null,[s("div",ze,[o(Z)])])])])])])])}}});export{Je as default};
