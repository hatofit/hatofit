import{_ as Y}from"./C-LChV6K.js";import{_ as W,m as X,g as F,h as J,l as K,n as B,q as D,a1 as x,o as g,x as $,w as o,b as a,z as V,a as i,A as M,y as Q,v as Z,M as ee,H as N,a2 as te,a0 as ae,G as z,c as C,I as s,F as oe,B as se,a3 as ne,O as I,k as re,t as P,d as v,e as le}from"./BqiWrrJw.js";import{_ as ie}from"./BdOK77RB.js";import{_ as de}from"./lNbjVntU.js";import{_ as ue}from"./ulwWl0-q.js";import{_ as ce}from"./CQlPFy4X.js";import{_ as pe}from"./Cxw5_Ya5.js";import{_ as me}from"./q5aIF8Zs.js";import{_ as fe}from"./4x2wAUPl.js";import{u as _e}from"./DqNYuvwW.js";import{Y as ge,G as ve,S as ye,h as he,_ as be}from"./DXBzYfzJ.js";import{l as xe}from"./zdYCwtVL.js";import{u as Ce}from"./t2h670SZ.js";import{$ as R}from"./CTQoGjjg.js";import{A as w,a as H}from"./CxOUCrNJ.js";import{z as y}from"./DXqQCM1T.js";import"./Cb9RPHSR.js";import"./Doeqeqsn.js";import"./q6RYS1Rg.js";const we={wrapper:"fixed inset-0 flex z-50",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},base:"relative flex-1 flex flex-col w-full focus:outline-none",background:"bg-white dark:bg-gray-900",ring:"",rounded:"",padding:"",shadow:"shadow-xl",width:"w-screen max-w-md",translate:{base:"translate-x-0",left:"-translate-x-full rtl:translate-x-full",right:"translate-x-full rtl:-translate-x-full"},transition:{enter:"transform transition ease-in-out duration-300",leave:"transform transition ease-in-out duration-200"}},ke=X(F.ui.strategy,F.ui.slideover,we),Ve=J({components:{HDialog:ge,HDialogPanel:ve,TransitionRoot:ye,TransitionChild:he},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},side:{type:String,default:"right",validator:t=>["left","right"].includes(t)},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(t,{emit:m}){const{ui:r,attrs:_}=K("slideover",B(t,"ui"),ke,B(t,"class")),h=D({get(){return t.modelValue},set(e){m("update:modelValue",e)}}),u=D(()=>t.transition?{...r.value.transition,enterFrom:t.side==="left"?r.value.translate.left:r.value.translate.right,enterTo:r.value.translate.base,leaveFrom:r.value.translate.base,leaveTo:t.side==="left"?r.value.translate.left:r.value.translate.right}:{});function l(e){if(t.preventClose){m("close-prevented");return}h.value=e,m("close")}const c=()=>{m("after-leave")};return xe(()=>_e("$zSEivjycv8")),{ui:r,attrs:_,isOpen:h,transitionClass:u,onAfterLeave:c,close:l}}});function $e(t,m,r,_,h,u){const l=x("TransitionChild"),c=x("HDialogPanel"),e=x("HDialog"),f=x("TransitionRoot");return g(),$(f,{as:"template",appear:t.appear,show:t.isOpen,onAfterLeave:t.onAfterLeave},{default:o(()=>[a(e,V({class:[t.ui.wrapper,{"justify-end":t.side==="right"}]},t.attrs,{onClose:t.close}),{default:o(()=>[t.overlay?(g(),$(l,V({key:0,as:"template",appear:t.appear},t.ui.overlay.transition),{default:o(()=>[i("div",{class:M([t.ui.overlay.base,t.ui.overlay.background])},null,2)]),_:1},16,["appear"])):Q("",!0),a(l,V({as:"template",appear:t.appear},t.transitionClass),{default:o(()=>[a(c,{class:M([t.ui.base,t.ui.width,t.ui.background,t.ui.ring,t.ui.padding])},{default:o(()=>[Z(t.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear"])]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const je=W(Ve,[["render",$e]]),Se={class:"flex-1"},Te={class:"flex justify-between"},Ue={key:0,class:"w-full grid grid-cols-3 gap-4"},Oe={class:"absolute top-0 left-0 w-full h-full flex flex-col justify-end pb-2 px-2 z-10 bg-black/50"},Ae={class:"ml-1 text-gray-100"},Fe={class:"ml-1 text-xs text-gray-300"},Be={key:1,class:"flex items-center justify-center h-[300px]"},De={class:"flex flex-col items-center gap-4"},Me=i("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"You don't join any company yet, create your own company or join another company",-1),Ne={class:"flex gap-4"},ze={class:"flex items-center justify-between"},Ie=i("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Create New Company ",-1),Pe={class:"flex justify-end gap-4"},Re=i("h2",{class:"text-xl font-semibold"},"Join Company",-1),He={class:"flex justify-end gap-4"},dt=J({__name:"index",setup(t){const m=ee(),r=N(!1),{data:_,pending:h}=Ce(w.Company.Companies.url());te(_,c=>{console.log("watch",c)}),ae(()=>{console.log("mounted",_.value)});const u=(()=>{const c=y.object({name:y.string().min(4,"Must be at least 4 characters"),description:y.string().min(4,"Must be at least 4 characters"),address:y.string().min(4,"Must be at least 4 characters")}),e=z({name:"",description:"",address:""});async function f(p){try{const d=await R(w.Company.CreateCompany.url(),{method:"POST",body:w.Company.CreateCompany.parseData({...e})});m.add({title:"Success",description:"Company created successfully"})}catch(d){d instanceof I&&d.response&&H(d.response)}}return{state:e,schema:c,onSubmitRegister:f}})(),l=(()=>{const c=N(!1),e=y.object({code:y.string().min(4,"Must be at least 4 characters")}),f=z({code:""});return{isOpen:c,schema:e,state:f,save:async()=>{try{const d=await R(w.Company.Join.url(),{method:"POST",body:JSON.stringify({code:f.code})});console.log("res",d),m.add({title:"Success",description:"Company joined successfully"})}catch(d){d instanceof I&&d.response&&H(d.response),console.error(d)}}}})();return(c,e)=>{var U,O,A;const f=Y,p=re,d=ie,L=de,k=ue,q=le,j=ce,b=pe,S=me,T=fe,E=je,G=be;return g(),C("div",Se,[i("div",Te,[a(f,{text:"Your Company"}),i("div",null,[a(d,{items:[[{label:"Create Company",icon:"i-heroicons-plus",click:()=>r.value=!0}]],popper:{placement:"bottom-end"}},{default:o(()=>[a(p,{color:"white","trailing-icon":"i-majesticons-dots-horizontal"})]),_:1},8,["items"])])]),(O=(U=s(_))==null?void 0:U.companies)!=null&&O.length?(g(),C("div",Ue,[(g(!0),C(oe,null,se((A=s(_))==null?void 0:A.companies,(n,Je)=>(g(),$(q,{to:`/dashboard/company/${n.id}`,class:"group"},{default:o(()=>[a(k,{class:"relative overflow-hidden border-b-2 h-[140px] border-orange-500 ring-2 ring-transparent group-hover:ring-gray-500"},{default:o(()=>[a(L,{class:"absolute z-[1] top-0 left-0 transition-transform duration-300 transform scale-105 group-hover:scale-110",src:"/images/scene/risen-wang-20jX9b35r_M-unsplash.jpg",alt:"Company Image",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",filter:"blur(2px) brightness(0.7)"}}),i("div",Oe,[i("div",Ae,P(n.name),1),i("div",Fe,P(n.description),1)])]),_:2},1024)]),_:2},1032,["to"]))),256))])):(g(),C("div",Be,[i("div",De,[Me,i("div",Ne,[a(p,{color:"primary",onClick:e[0]||(e[0]=n=>r.value=!0)},{default:o(()=>[v("Create Company")]),_:1}),a(p,{color:"gray",onClick:e[1]||(e[1]=n=>s(l).isOpen.value=!0)},{default:o(()=>[v("Join Company")]),_:1})])])])),a(E,{modelValue:s(r),"onUpdate:modelValue":e[7]||(e[7]=n=>ne(r)?r.value=n:null),"prevent-close":""},{default:o(()=>[a(k,{class:"flex flex-col flex-1",ui:{body:{base:"flex-1 overflow-y-auto p-4"},ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:o(()=>[i("div",ze,[Ie,a(p,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:e[2]||(e[2]=n=>r.value=!1)})])]),default:o(()=>[a(T,{schema:s(u).schema,state:s(u).state,class:"flex flex-col gap-4",onSubmit:s(u).onSubmitRegister},{default:o(()=>[a(b,{label:"Name",name:"name",required:""},{default:o(()=>[a(j,{modelValue:s(u).state.name,"onUpdate:modelValue":e[3]||(e[3]=n=>s(u).state.name=n),placeholder:"name"},null,8,["modelValue"])]),_:1}),a(b,{label:"Description",name:"description",required:""},{default:o(()=>[a(S,{modelValue:s(u).state.description,"onUpdate:modelValue":e[4]||(e[4]=n=>s(u).state.description=n),placeholder:"description"},null,8,["modelValue"])]),_:1}),a(b,{label:"Address",name:"address",required:""},{default:o(()=>[a(S,{modelValue:s(u).state.address,"onUpdate:modelValue":e[5]||(e[5]=n=>s(u).state.address=n),placeholder:"address"},null,8,["modelValue"])]),_:1}),i("div",Pe,[a(p,{color:"primary",type:"submit"},{default:o(()=>[v("Create")]),_:1}),a(p,{color:"red",variant:"ghost",onClick:e[6]||(e[6]=n=>r.value=!1)},{default:o(()=>[v("Cancel")]),_:1})])]),_:1},8,["schema","state","onSubmit"])]),_:1})]),_:1},8,["modelValue"]),a(G,{modelValue:s(l).isOpen.value,"onUpdate:modelValue":e[10]||(e[10]=n=>s(l).isOpen.value=n)},{default:o(()=>[a(k,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:o(()=>[Re]),footer:o(()=>[i("div",He,[a(p,{color:"primary",onClick:s(l).save},{default:o(()=>[v("Join")]),_:1},8,["onClick"]),a(p,{color:"red",variant:"ghost",onClick:e[9]||(e[9]=n=>s(l).isOpen.value=!1)},{default:o(()=>[v("Cancel")]),_:1})])]),default:o(()=>[a(T,{state:s(l).state,schema:s(l).schema,class:"flex flex-col gap-4"},{default:o(()=>[a(b,{label:"Company ID",name:"code",required:""},{default:o(()=>[a(j,{placeholder:"code",modelValue:s(l).state.code,"onUpdate:modelValue":e[8]||(e[8]=n=>s(l).state.code=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["state","schema"])]),_:1})]),_:1},8,["modelValue"])])}}});export{dt as default};
