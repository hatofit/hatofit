var p=Object.defineProperty;var M=(r,e,n)=>e in r?p(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var i=(r,e,n)=>M(r,typeof e!="symbol"?e+"":e,n);import{ag as b}from"./C4oi7rqb.js";const m=()=>{const n=150+Math.floor(Math.random()*105),s=150+Math.floor(Math.random()*105),d=150+Math.floor(Math.random()*105);return`rgb(${n}, ${s}, ${d})`};class v{constructor(){i(this,"type","")}parse(...e){return{stats:[],type:this.type,labels:[],datasets:[{label:"",data:[]}],yMin:0,yMax:0}}}class x extends v{constructor(){super(...arguments);i(this,"type","hr")}parse(n){const s=[];for(const a of n)for(const[t,o]of a.value)typeof t=="number"&&!s.includes(t)&&s.push(t);const d=[];for(const a of n){const t={data:{},borderColor:m(),label:a.device,tension:0,borderWidth:2,fill:"start",hidden:!0};for(const[o,h]of a.value)typeof o=="number"&&s.includes(o)&&(t.data[o]=h);d.push(t)}const c={data:{},borderColor:m(),label:"Merged",tension:0,borderWidth:2,fill:"start"};for(const a of s){const t=d.map(o=>o.data[a]||0);c.data[a]=t.reduce((o,h)=>o+h,0)/t.length}d.unshift(c);let f="second";s[s.length-1]>100&&(f="minute");const u=[];if(f==="second")for(const a of s)u.push(b().startOf("day").add(a,"second").format("s")+"s");else for(const a of s)u.push(b().startOf("day").add(a,"second").format("mm:ss"));const l=[{label:"Min",value:0},{label:"Avg",value:0},{label:"Max",value:0}];{const a=Object.values(c.data);l[0].value=Math.round(Math.min(...a)),l[1].value=Math.round(a.reduce((t,o)=>t+o,0)/a.length),l[2].value=Math.round(Math.max(...a))}return{type:this.type,stats:l,labels:u,datasets:d.map(a=>({...a,data:Object.values(a.data)})),yMin:Math.min(...d.map(a=>Math.min(...Object.values(a.data)))),yMax:Math.max(...d.map(a=>Math.max(...Object.values(a.data))))}}}export{x as R};
