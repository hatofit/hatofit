import{_ as Y}from"./DBMXpwFx.js";import{_ as W,m as Q,g as D,h as R,k as X,l as z,n as V,H as C,o as g,v as j,w as o,b as a,z as $,a as u,x as B,y as K,s as Z,J as ee,G as M,a2 as te,a1 as ae,E as N,c as x,I as n,F as oe,A as se,a3 as ne,L as P,j as re,t as I,d as v,e as le}from"./C4oi7rqb.js";import{_ as ie}from"./DoWI4-x-.js";import{_ as de}from"./DCZ3GSQN.js";import{_ as ue}from"./CSiqqgES.js";import{_ as ce}from"./BUDjGFlJ.js";import{_ as pe}from"./BTxzdq8K.js";import{_ as me}from"./BXpTFcnK.js";import{_ as fe}from"./DQOsUHu-.js";import{u as _e}from"./CofNhih0.js";import{Y as ge,G as ve,S as ye,h as he,_ as be}from"./gEWomNyw.js";import{l as Ce}from"./C9mN9a5t.js";import{u as xe}from"./NTJ_zpcL.js";import{$ as J}from"./BuWc7qdG.js";import{A as w,a as L}from"./Cy9l6Tiu.js";import{z as y}from"./DXqQCM1T.js";import"./CwFyS61N.js";import"./C8OBkV36.js";import"./CgTedULm.js";const we={wrapper:"fixed inset-0 flex z-50",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-in-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in-out duration-500",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},base:"relative flex-1 flex flex-col w-full focus:outline-none",background:"bg-white dark:bg-gray-900",ring:"",rounded:"",padding:"",shadow:"shadow-xl",width:"w-screen max-w-md",height:"h-screen max-h-96",translate:{base:"translate-x-0",left:"-translate-x-full rtl:translate-x-full",right:"translate-x-full rtl:-translate-x-full",top:"-translate-y-full",bottom:"translate-y-full"},transition:{enter:"transform transition ease-in-out duration-300",leave:"transform transition ease-in-out duration-200"}},ke=Q(D.ui.strategy,D.ui.slideover,we),Ve=R({components:{HDialog:ge,HDialogPanel:ve,TransitionRoot:ye,TransitionChild:he},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},side:{type:String,default:"right",validator:e=>["left","right","top","bottom"].includes(e)},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:f}){const{ui:s,attrs:_}=X("slideover",z(e,"ui"),ke,z(e,"class")),h=V({get(){return e.modelValue},set(l){f("update:modelValue",l)}}),p=V(()=>{if(!e.transition)return{};let l,i;switch(e.side){case"left":l=s.value.translate.left,i=s.value.translate.left;break;case"right":l=s.value.translate.right,i=s.value.translate.right;break;case"top":l=s.value.translate.top,i=s.value.translate.top;break;case"bottom":l=s.value.translate.bottom,i=s.value.translate.bottom;break;default:l=s.value.translate.right,i=s.value.translate.right}return{...s.value.transition,enterFrom:l,enterTo:s.value.translate.base,leaveFrom:s.value.translate.base,leaveTo:i}}),d=V(()=>{switch(e.side){case"left":return"horizontal";case"right":return"horizontal";case"top":return"vertical";case"bottom":return"vertical";default:return"right"}});function m(l){if(e.preventClose){f("close-prevented");return}h.value=l,f("close")}const t=()=>{f("after-leave")};return Ce(()=>_e("$0eVPFG8lLQ")),{ui:s,attrs:_,isOpen:h,transitionClass:p,sideType:d,onAfterLeave:t,close:m}}});function $e(e,f,s,_,h,p){const d=C("TransitionChild"),m=C("HDialogPanel"),t=C("HDialog"),l=C("TransitionRoot");return g(),j(l,{as:"template",appear:e.appear,show:e.isOpen,onAfterLeave:e.onAfterLeave},{default:o(()=>[a(t,$({class:[e.ui.wrapper,{"justify-end":e.side==="right"},{"items-end":e.side==="bottom"}]},e.attrs,{onClose:e.close}),{default:o(()=>[e.overlay?(g(),j(d,$({key:0,as:"template",appear:e.appear},e.ui.overlay.transition),{default:o(()=>[u("div",{class:B([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear"])):K("",!0),a(d,$({as:"template",appear:e.appear},e.transitionClass),{default:o(()=>[a(m,{class:B([e.ui.base,e.sideType==="horizontal"?[e.ui.width,"h-full"]:[e.ui.height,"w-full"],e.ui.background,e.ui.ring,e.ui.padding])},{default:o(()=>[Z(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear"])]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const je=W(Ve,[["render",$e]]),Te={class:"flex-1"},Se={class:"flex justify-between"},Ue={key:0,class:"w-full grid grid-cols-3 gap-4"},Oe={class:"absolute top-0 left-0 w-full h-full flex flex-col justify-end pb-2 px-2 z-10 bg-black/50"},Fe={class:"ml-1 text-gray-100"},Ae={class:"ml-1 text-xs text-gray-300"},De={key:1,class:"flex items-center justify-center h-[300px]"},ze={class:"flex flex-col items-center gap-4"},Be=u("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"You don't join any company yet, create your own company or join another company",-1),Me={class:"flex gap-4"},Ne={class:"flex items-center justify-between"},Pe=u("h3",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Create New Company ",-1),Ie={class:"flex justify-end gap-4"},Je=u("h2",{class:"text-xl font-semibold"},"Join Company",-1),Le={class:"flex justify-end gap-4"},dt=R({__name:"index",setup(e){const f=ee(),s=M(!1),{data:_,pending:h}=xe(w.Company.Companies.url());te(_,m=>{console.log("watch",m)}),ae(()=>{console.log("mounted",_.value)});const p=(()=>{const m=y.object({name:y.string().min(4,"Must be at least 4 characters"),description:y.string().min(4,"Must be at least 4 characters"),address:y.string().min(4,"Must be at least 4 characters")}),t=N({name:"",description:"",address:""});async function l(i){try{const c=await J(w.Company.CreateCompany.url(),{method:"POST",body:w.Company.CreateCompany.parseData({...t})});f.add({title:"Success",description:"Company created successfully"})}catch(c){c instanceof P&&c.response&&L(c.response)}}return{state:t,schema:m,onSubmitRegister:l}})(),d=(()=>{const m=M(!1),t=y.object({code:y.string().min(1,"Must be at least 4 characters")}),l=N({code:""});return{isOpen:m,schema:t,state:l,save:async()=>{try{const c=await J(w.Company.Join.url(),{method:"POST",body:JSON.stringify({code:l.code})});console.log("res",c),f.add({title:"Success",description:"Company joined successfully"})}catch(c){c instanceof P&&c.response&&L(c.response),console.error(c)}}}})();return(m,t)=>{var O,F,A;const l=Y,i=re,c=ie,H=de,k=ue,G=le,T=ce,b=pe,S=me,U=fe,q=je,E=be;return g(),x("div",Te,[u("div",Se,[a(l,{text:"Your Company"}),u("div",null,[a(c,{items:[[{label:"Create Company",icon:"i-heroicons-plus",click:()=>s.value=!0},{label:"Join Company",icon:"i-heroicons-user-add",click:()=>n(d).isOpen.value=!0}]],popper:{placement:"bottom-end"}},{default:o(()=>[a(i,{color:"white","trailing-icon":"i-majesticons-dots-horizontal"})]),_:1},8,["items"])])]),(F=(O=n(_))==null?void 0:O.companies)!=null&&F.length?(g(),x("div",Ue,[(g(!0),x(oe,null,se((A=n(_))==null?void 0:A.companies,(r,Re)=>(g(),j(G,{to:`/dashboard/company/${r.id}`,class:"group"},{default:o(()=>[a(k,{class:"relative overflow-hidden border-b-2 h-[140px] border-orange-500 ring-2 ring-transparent group-hover:ring-gray-500"},{default:o(()=>[a(H,{class:"absolute z-[1] top-0 left-0 transition-transform duration-300 transform scale-105 group-hover:scale-110",src:"/images/scene/risen-wang-20jX9b35r_M-unsplash.jpg",alt:"Company Image",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center",filter:"blur(2px) brightness(0.7)"}}),u("div",Oe,[u("div",Fe,I(r.name),1),u("div",Ae,I(r.description),1)])]),_:2},1024)]),_:2},1032,["to"]))),256))])):(g(),x("div",De,[u("div",ze,[Be,u("div",Me,[a(i,{color:"primary",onClick:t[0]||(t[0]=r=>s.value=!0)},{default:o(()=>[v("Create Company")]),_:1}),a(i,{color:"gray",onClick:t[1]||(t[1]=r=>n(d).isOpen.value=!0)},{default:o(()=>[v("Join Company")]),_:1})])])])),a(q,{modelValue:n(s),"onUpdate:modelValue":t[7]||(t[7]=r=>ne(s)?s.value=r:null),"prevent-close":""},{default:o(()=>[a(k,{class:"flex flex-col flex-1",ui:{body:{base:"flex-1 overflow-y-auto p-4"},ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:o(()=>[u("div",Ne,[Pe,a(i,{color:"gray",variant:"ghost",icon:"i-heroicons-x-mark-20-solid",class:"-my-1",onClick:t[2]||(t[2]=r=>s.value=!1)})])]),default:o(()=>[a(U,{schema:n(p).schema,state:n(p).state,class:"flex flex-col gap-4",onSubmit:n(p).onSubmitRegister},{default:o(()=>[a(b,{label:"Name",name:"name",required:""},{default:o(()=>[a(T,{modelValue:n(p).state.name,"onUpdate:modelValue":t[3]||(t[3]=r=>n(p).state.name=r),placeholder:"name"},null,8,["modelValue"])]),_:1}),a(b,{label:"Description",name:"description",required:""},{default:o(()=>[a(S,{modelValue:n(p).state.description,"onUpdate:modelValue":t[4]||(t[4]=r=>n(p).state.description=r),placeholder:"description"},null,8,["modelValue"])]),_:1}),a(b,{label:"Address",name:"address",required:""},{default:o(()=>[a(S,{modelValue:n(p).state.address,"onUpdate:modelValue":t[5]||(t[5]=r=>n(p).state.address=r),placeholder:"address"},null,8,["modelValue"])]),_:1}),u("div",Ie,[a(i,{color:"primary",type:"submit"},{default:o(()=>[v("Create")]),_:1}),a(i,{color:"red",variant:"ghost",onClick:t[6]||(t[6]=r=>s.value=!1)},{default:o(()=>[v("Cancel")]),_:1})])]),_:1},8,["schema","state","onSubmit"])]),_:1})]),_:1},8,["modelValue"]),a(E,{modelValue:n(d).isOpen.value,"onUpdate:modelValue":t[10]||(t[10]=r=>n(d).isOpen.value=r)},{default:o(()=>[a(k,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:o(()=>[Je]),footer:o(()=>[u("div",Le,[a(i,{color:"primary",onClick:n(d).save},{default:o(()=>[v("Join")]),_:1},8,["onClick"]),a(i,{color:"red",variant:"ghost",onClick:t[9]||(t[9]=r=>n(d).isOpen.value=!1)},{default:o(()=>[v("Cancel")]),_:1})])]),default:o(()=>[a(U,{state:n(d).state,schema:n(d).schema,class:"flex flex-col gap-4"},{default:o(()=>[a(b,{label:"Company ID",name:"code",required:""},{default:o(()=>[a(T,{placeholder:"code",modelValue:n(d).state.code,"onUpdate:modelValue":t[8]||(t[8]=r=>n(d).state.code=r)},null,8,["modelValue"])]),_:1})]),_:1},8,["state","schema"])]),_:1})]),_:1},8,["modelValue"])])}}});export{dt as default};
