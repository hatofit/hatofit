import{h as J,J as B,P as R,n as z,G as y,L as C,o as v,c as h,a as u,b as o,w as l,I as a,j as L,d as p,t as g,F as W,A as G,v as P,y as M}from"./B9LE8NEz.js";import{_ as H}from"./Sl-S-XSd.js";import{_ as X}from"./DyQZQ-n-.js";import{_ as Y}from"./DZMaSFZu.js";import{_ as K}from"./DwqDLC2w.js";import{_ as Q}from"./CMrKJGHs.js";import{_ as Z}from"./DtnHAr2r.js";import{_ as ee}from"./BlGS-IPB.js";import{_ as te}from"./C2zDVeAx.js";import{_ as oe}from"./DlIpFbAq.js";import{u as ne}from"./BTBZQERO.js";import{u as ae}from"./Cw5yVoIJ.js";import{$ as w}from"./DI6bnUVi.js";import{A as V,a as E}from"./C7p56BG2.js";import{z as r}from"./DXqQCM1T.js";import"./Yh1kJr-Y.js";import"./vfiB1am4.js";import"./DpjbJNLR.js";import"./gPNM1Iq0.js";import"./d71RW6O6.js";import"./tCEg_WaZ.js";import"./BmaHcWh2.js";const ie={class:"mb-6"},le={class:"flex justify-between"},se=u("h2",{class:"text-3xl"},"Exercises",-1),re={class:"border-t border-gray-50/50 py-6 mt-6 flex flex-col gap-4"},ue={class:"flex flex-col gap-4"},de={class:"px-3 py-2 border-b border-gray-500/50 flex justify-between items-center"},me={class:"text-xs"},pe={class:"px-3 py-2"},ce={class:"flex justify-end"},fe={class:"flex justify-end gap-2"},Fe=J({__name:"index",async setup(_e){let c,U;const k=B(),{companyId:f}=([c,U]=R(()=>ne()),c=await c,U(),c),{data:S,refresh:$}=ae(V.Company.Exercises.url(f.value)),j=[{key:"no",label:"#"},{key:"name",label:"Name"},{key:"type",label:"type"},{key:"difficulty",label:"difficulty"},{key:"duration",label:"Duration"},{key:"actions"}],I=z(()=>{var s;return(((s=S.value)==null?void 0:s.exercises)||[]).map((e,i)=>({no:i+1,id:e._id,name:e.name,duration:e.duration+" seconds",type:e.type,difficulty:e.difficulty,raw:e}))}),t=(()=>{const s={isOpen:y(!1),mode:y("create"),schema:r.object({name:r.string().min(3).max(255),description:r.string().min(3).max(255),thumbnail:r.string().url().optional(),type:r.enum(["cardio","strength","flexibility","balance","endurance","power","speed","agility","coordination","reaction","mobility","stability","other"]),difficulty:r.enum(["expert","intermediate","advanced","beginner","professional","olympic","paralympic","other"]),instructions:r.array(r.object({type:r.enum(["instruction","rest"]),duration:r.number().int().min(0),name:r.string().min(3).max(255).optional(),content:r.object({lottie:r.string().url().optional(),video:r.string().url().optional(),image:r.string().url().optional()}).optional()}))}),inputs:y({name:"",description:"",thumbnail:"",type:"cardio",difficulty:"expert",duration:0,instructions:[{content:{lottie:"https://assets2.lottiefiles.com/packages/lf20_dwydvW8JJ7.json",video:"https://www.youtube.com/watch?v=LXuVHYAfyGU",image:"https://static.vecteezy.com/system/resources/previews/005/178/354/original/woman-doing-jump-rope-skipping-cardio-exercise-flat-illustration-isolated-on-white-background-free-vector.jpg"},name:"Jumping rope",duration:30,type:"instruction"},{duration:30,type:"rest"}]}),editId:y(null)};return{...s,onSubmitRegister:async e=>{if(console.log("onSubmitRegister",e),s.mode.value==="create"){console.log("Create Exercise");try{const i=await w(V.Company.CreateExercises.url(f.value),{method:"POST",body:JSON.stringify(s.inputs.value)});console.log(i),k.add({title:"Exercise created"}),s.isOpen.value=!1}catch(i){i instanceof C&&i.response&&E(i.response),console.error(i)}}else{if(console.log("Edit Exercise",s.editId.value),!s.editId.value)return;try{const i=await w(V.Company.UpdateExercises.url(f.value,s.editId.value),{method:"PUT",body:JSON.stringify(s.inputs.value)});console.log(i),k.add({title:"Exercise updated"}),s.isOpen.value=!1}catch(i){i instanceof C&&i.response&&E(i.response),console.error(i)}$()}}}})(),O=s=>[[{label:"Sessions",icon:"i-material-symbols-light-exercise-outline",to:`/dashboard/company/${f.value}/manage/exercise/${s.id}`},{label:"Edit",icon:"i-heroicons-pencil-square-20-solid",click:()=>{const e=s==null?void 0:s.raw;t.isOpen.value=!0,t.mode.value="edit",t.inputs.value={name:e.name,description:e.description,thumbnail:e.thumbnail,type:e.type,difficulty:e.difficulty,duration:e.duration,instructions:e.instructions},t.editId.value=e._id}}],[{label:"Delete",icon:"i-heroicons-trash-20-solid"}]];return(s,e)=>{const i=L,T=H,N=X,_=Y,d=K,A=Q,b=Z,q=ee,D=te,F=oe;return v(),h("div",null,[u("div",ie,[u("div",le,[se,o(i,{onClick:e[0]||(e[0]=n=>a(t).isOpen.value=!0)},{default:l(()=>[p("Create Exercise")]),_:1})])]),u("div",null,[o(N,{columns:j,rows:a(I)},{"actions-data":l(({row:n})=>[o(T,{items:O(n)},{default:l(()=>[o(i,{color:"gray",variant:"ghost",icon:"i-heroicons-ellipsis-horizontal-20-solid"})]),_:2},1032,["items"])]),_:1},8,["rows"])]),o(F,{modelValue:a(t).isOpen.value,"onUpdate:modelValue":e[8]||(e[8]=n=>a(t).isOpen.value=n)},{default:l(()=>[o(D,{ui:{ring:"",divide:"divide-y divide-gray-100 dark:divide-gray-800"}},{header:l(()=>[p(g(a(t).mode.value==="create"?"Create":"Edit")+" Exercise ",1)]),footer:l(()=>[u("div",fe,[o(i,{color:"gray",variant:"ghost",onClick:e[7]||(e[7]=n=>a(t).isOpen.value=!1)},{default:l(()=>[p("Cancel")]),_:1}),o(i,{color:"primary",onClick:a(t).onSubmitRegister},{default:l(()=>[p(" Save ")]),_:1},8,["onClick"])])]),default:l(()=>[o(q,{schema:a(t).schema,state:a(t).inputs.value,class:"flex flex-col gap-4",onSubmit:a(t).onSubmitRegister},{default:l(()=>[o(d,{label:"Name",name:"name",required:"",class:"flex-1"},{default:l(()=>[o(_,{modelValue:a(t).inputs.value.name,"onUpdate:modelValue":e[1]||(e[1]=n=>a(t).inputs.value.name=n),placeholder:"name"},null,8,["modelValue"])]),_:1}),o(d,{label:"Description",name:"description",required:"",class:"flex-1"},{default:l(()=>[o(A,{modelValue:a(t).inputs.value.description,"onUpdate:modelValue":e[2]||(e[2]=n=>a(t).inputs.value.description=n),placeholder:"description"},null,8,["modelValue"])]),_:1}),o(d,{label:"Thumbnail",name:"thumbnail",class:"flex-1"},{default:l(()=>[o(_,{modelValue:a(t).inputs.value.thumbnail,"onUpdate:modelValue":e[3]||(e[3]=n=>a(t).inputs.value.thumbnail=n),placeholder:"thumbnail"},null,8,["modelValue"])]),_:1}),o(d,{label:"Type",name:"type",required:"",class:"flex-1"},{default:l(()=>[o(b,{modelValue:a(t).inputs.value.type,"onUpdate:modelValue":e[4]||(e[4]=n=>a(t).inputs.value.type=n),options:["cardio","strength","flexibility","balance","endurance","power","speed","agility","coordination","reaction","mobility","stability","other"]},null,8,["modelValue"])]),_:1}),o(d,{label:"Difficulty",name:"difficulty",required:"",class:"flex-1"},{default:l(()=>[o(b,{modelValue:a(t).inputs.value.difficulty,"onUpdate:modelValue":e[5]||(e[5]=n=>a(t).inputs.value.difficulty=n),options:["expert","intermediate","advanced","beginner","professional","olympic","paralympic","other"]},null,8,["modelValue"])]),_:1})]),_:1},8,["schema","state","onSubmit"]),u("div",re,[u("div",null,"Instructions ("+g(a(t).inputs.value.instructions.length)+")",1),u("div",ue,[(v(!0),h(W,null,G(a(t).inputs.value.instructions,(n,x)=>(v(),h("div",{key:x,class:"border rounded border-gray-500/50"},[u("div",de,[u("div",null,"Intruction "+g(x+1),1),u("div",me,[o(i,{color:"red",variant:"ghost",icon:"i-heroicons-trash-20-solid",size:"xs",onClick:m=>a(t).inputs.value.instructions.splice(x,1)},null,8,["onClick"])])]),u("div",pe,[o(d,{label:"Type",name:"type",required:"",class:"flex-1"},{default:l(()=>[o(b,{modelValue:n.type,"onUpdate:modelValue":m=>n.type=m,options:["instruction","rest"]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(d,{label:"Duration",name:"duration",required:"",class:"flex-1"},{default:l(()=>[o(_,{modelValue:n.duration,"onUpdate:modelValue":m=>n.duration=m,type:"number",placeholder:"duration"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n.type=="instruction"?(v(),P(d,{key:0,label:"Name",name:"name",class:"flex-1"},{default:l(()=>[o(_,{modelValue:n.name,"onUpdate:modelValue":m=>n.name=m,placeholder:"name"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):M("",!0)])]))),128)),u("div",ce,[o(i,{onClick:e[6]||(e[6]=n=>a(t).inputs.value.instructions.push({type:"instruction",duration:0}))},{default:l(()=>[p("Add Instruction")]),_:1})])])])]),_:1})]),_:1},8,["modelValue"])])}}});export{Fe as default};
