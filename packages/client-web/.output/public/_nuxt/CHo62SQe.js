import{h as $,J as P,C as T,P as g,o as E,v as w,w as r,I as S,a as l,b as d,t as p,d as B,i as K,j as Y,L as _}from"./B9LE8NEz.js";import{_ as F}from"./Sl-S-XSd.js";import{_ as L}from"./DyQZQ-n-.js";import{u as V}from"./BTBZQERO.js";import{u as W}from"./Cw5yVoIJ.js";import{$ as u}from"./DI6bnUVi.js";import{A as c,a as h}from"./C7p56BG2.js";import"./Yh1kJr-Y.js";import"./vfiB1am4.js";import"./DpjbJNLR.js";import"./gPNM1Iq0.js";import"./d71RW6O6.js";import"./tCEg_WaZ.js";const j={class:"flex items-center"},I={class:"ml-2"},R={class:"font-semibold"},ne=$({__name:"member",async setup(z){let s,f;const b=[{key:"id",label:"#"},{key:"name",label:"Name"},{key:"User.email",label:"Email"},{key:"role",label:"Role"},{key:"createdAt",label:"Since"},{key:"actions"}],i=P(),k=T(),{companyId:a}=([s,f]=g(()=>V()),s=await s,f(),s),{data:U,refresh:m}=W(c.Company.Members.url(a.value)),A=async o=>{console.log("Demote",o);try{const e=await u(c.Company.AdminDemote.url(a.value,o),{method:"PUT"});m(),i.add({title:"Success demote admin"})}catch(e){console.error(e),e instanceof _&&e.response&&h(e.response)}},v=async o=>{console.log("Promote",o);try{const e=await u(c.Company.AdminPromote.url(a.value,o),{method:"PUT"});m(),i.add({title:"Success promote admin"})}catch(e){console.error(e),e instanceof _&&e.response&&h(e.response)}},x=async o=>{console.log("Kick",o);try{const e=await u(c.Company.MemberKick.url(a.value,o),{method:"DELETE"});m(),i.add({title:"Success kick member"})}catch(e){console.error(e),e instanceof _&&e.response&&h(e.response)}},C=o=>{var e,n;return[[...o.role=="admin"?[{label:"Demote to Member",icon:"i-heroicons-arrow-down-circle-20-solid",click:()=>A(o.User._id)}]:[{label:"Promote to Admin",icon:"i-heroicons-arrow-up-circle-20-solid",click:()=>v(o.User._id)}],...o.role!="admin"&&`${o.User.firstName} ${o.User.lastName}`!=((n=(e=k.data.value)==null?void 0:e.user)==null?void 0:n.name)?[{label:"Kick Member",icon:"i-heroicons-trash-20-solid",click:()=>x(o.User._id)}]:[]]]};return(o,e)=>{var y;const n=K,D=Y,M=F,N=L;return E(),w(N,{columns:b,rows:(y=S(U))==null?void 0:y.members},{"name-data":r(({row:t})=>[l("div",j,[d(n,{name:t.name},null,8,["name"]),l("div",I,[l("div",R,p(t.User.firstName)+" "+p(t.User.lastName),1)])])]),"createdAt-data":r(({row:t})=>[B(p(o.$dayjs(t.createdAt).format("dddd, DD MMMM YYYY")),1)]),"actions-data":r(({row:t})=>[d(M,{items:C(t)},{default:r(()=>[d(D,{color:"gray",variant:"ghost",icon:"i-heroicons-ellipsis-horizontal-20-solid"})]),_:2},1032,["items"])]),_:1},8,["rows"])}}});export{ne as default};
