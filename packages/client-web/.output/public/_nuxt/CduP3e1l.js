import{_ as F}from"./CQlPFy4X.js";import{_ as B}from"./Cxw5_Ya5.js";import{_ as M}from"./q5aIF8Zs.js";import{h as N,H as x,T as v,a0 as S,o as T,c as $,b as t,w as s,I as n,a as C,O as k,k as q}from"./BqiWrrJw.js";import{_ as E}from"./4x2wAUPl.js";import{_ as I}from"./ulwWl0-q.js";import{u as W}from"./DX4KognR.js";import{u as j}from"./t2h670SZ.js";import{$ as D}from"./CTQoGjjg.js";import{A as u,a as G}from"./CxOUCrNJ.js";import{z as p}from"./DXqQCM1T.js";import"./Cb9RPHSR.js";import"./DqNYuvwW.js";import"./Doeqeqsn.js";const L={class:"flex flex-col gap-4"},O=C("h2",{class:"text-xl font-semibold"},"General",-1),z={class:"flex justify-end"},re=N({__name:"setting",async setup(H){let o,l;const _=x(!1),{companyId:f}=([o,l]=v(()=>W()),o=await o,l(),o),{data:c,refresh:b}=([o,l]=v(()=>j(u.Company.Company.url(f.value))),o=await o,l(),o),U=p.object({name:p.string().min(4,"Must be at least 4 characters"),description:p.string().min(4,"Must be at least 4 characters"),address:p.string().min(4,"Must be at least 4 characters")}),a=x({name:"",description:"",address:""}),y=()=>{var i,e,r;a.value={name:((i=c.value)==null?void 0:i.company.name)||"",description:((e=c.value)==null?void 0:e.company.description)||"",address:((r=c.value)==null?void 0:r.company.address)||""}};S(()=>{y()});async function V(i){_.value=!0;try{const e=await D(u.Company.UpdateCompany.url(f.value),{method:"PUT",body:JSON.stringify(u.Company.UpdateCompany.parseData({name:a.value.name,description:a.value.description,address:a.value.address}))});try{await b()}catch{}y()}catch(e){e instanceof k&&e.response&&G(e.response),console.error(e)}_.value=!1}return(i,e)=>{const r=F,d=B,h=M,g=q,w=E,A=I;return T(),$("div",L,[t(A,null,{header:s(()=>[O]),default:s(()=>[t(w,{state:n(a),schema:n(U),onSubmit:V,class:"flex flex-col gap-4"},{default:s(()=>[t(d,{label:"Company Name",name:"name",required:""},{default:s(()=>[t(r,{modelValue:n(a).name,"onUpdate:modelValue":e[0]||(e[0]=m=>n(a).name=m)},null,8,["modelValue"])]),_:1}),t(d,{label:"Company Description",name:"description",required:""},{default:s(()=>[t(h,{modelValue:n(a).description,"onUpdate:modelValue":e[1]||(e[1]=m=>n(a).description=m)},null,8,["modelValue"])]),_:1}),t(d,{label:"Company Address",name:"address",required:""},{default:s(()=>[t(h,{modelValue:n(a).address,"onUpdate:modelValue":e[2]||(e[2]=m=>n(a).address=m)},null,8,["modelValue"])]),_:1}),C("div",z,[t(g,{variant:"solid",color:"primary",type:"submit",label:"Save"})])]),_:1},8,["state","schema"])]),_:1})])}}});export{re as default};
