import{_ as F}from"./BUDjGFlJ.js";import{_ as B}from"./BTxzdq8K.js";import{_ as M}from"./BXpTFcnK.js";import{h as N,G as x,P as v,a1 as S,o as $,c as j,b as t,w as s,I as n,a as C,L as q,j as E}from"./C4oi7rqb.js";import{_ as G}from"./DQOsUHu-.js";import{_ as I}from"./CSiqqgES.js";import{u as L}from"./BZ80iXJq.js";import{u as T}from"./NTJ_zpcL.js";import{$ as W}from"./BuWc7qdG.js";import{A as u,a as k}from"./Cy9l6Tiu.js";import{z as p}from"./DXqQCM1T.js";import"./CwFyS61N.js";import"./CofNhih0.js";import"./C8OBkV36.js";const D={class:"flex flex-col gap-4"},P=C("h2",{class:"text-xl font-semibold"},"General",-1),z={class:"flex justify-end"},re=N({__name:"setting",async setup(J){let o,l;const _=x(!1),{companyId:f}=([o,l]=v(()=>L()),o=await o,l(),o),{data:c,refresh:b}=([o,l]=v(()=>T(u.Company.Company.url(f.value))),o=await o,l(),o),U=p.object({name:p.string().min(4,"Must be at least 4 characters"),description:p.string().min(4,"Must be at least 4 characters"),address:p.string().min(4,"Must be at least 4 characters")}),a=x({name:"",description:"",address:""}),y=()=>{var i,e,r;a.value={name:((i=c.value)==null?void 0:i.company.name)||"",description:((e=c.value)==null?void 0:e.company.description)||"",address:((r=c.value)==null?void 0:r.company.address)||""}};S(()=>{y()});async function V(i){_.value=!0;try{const e=await W(u.Company.UpdateCompany.url(f.value),{method:"PUT",body:JSON.stringify(u.Company.UpdateCompany.parseData({name:a.value.name,description:a.value.description,address:a.value.address}))});try{await b()}catch{}y()}catch(e){e instanceof q&&e.response&&k(e.response),console.error(e)}_.value=!1}return(i,e)=>{const r=F,d=B,h=M,g=E,w=G,A=I;return $(),j("div",D,[t(A,null,{header:s(()=>[P]),default:s(()=>[t(w,{state:n(a),schema:n(U),onSubmit:V,class:"flex flex-col gap-4"},{default:s(()=>[t(d,{label:"Company Name",name:"name",required:""},{default:s(()=>[t(r,{modelValue:n(a).name,"onUpdate:modelValue":e[0]||(e[0]=m=>n(a).name=m)},null,8,["modelValue"])]),_:1}),t(d,{label:"Company Description",name:"description",required:""},{default:s(()=>[t(h,{modelValue:n(a).description,"onUpdate:modelValue":e[1]||(e[1]=m=>n(a).description=m)},null,8,["modelValue"])]),_:1}),t(d,{label:"Company Address",name:"address",required:""},{default:s(()=>[t(h,{modelValue:n(a).address,"onUpdate:modelValue":e[2]||(e[2]=m=>n(a).address=m)},null,8,["modelValue"])]),_:1}),C("div",z,[t(g,{variant:"solid",color:"primary",type:"submit",label:"Save"})])]),_:1},8,["state","schema"])]),_:1})])}}});export{re as default};
