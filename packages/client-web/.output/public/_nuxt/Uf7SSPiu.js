import{_ as Z}from"./D2cKDT-_.js";import{_ as K,m as Q,g as z,h as R,i as H,j as J,k as I,l as X,n as Y,q as T,r as N,s as ee,o as r,c as p,a as s,v as V,x as k,y as u,z as O,A as b,d as v,t as q,F as L,B as E,C as B,D as oe,E as te,G as le,H as U,b as l,w as c,I as o,e as se}from"./BD7xl8KE.js";import{_ as re}from"./cvDSRl_h.js";import{_ as ae}from"./BPtEdviJ.js";import{_ as ie}from"./Dq_MzaPq.js";import{u as ne}from"./BIwsdVk5.js";import{A}from"./0UBdkORJ.js";import"./DMlTFDde.js";import"./CEJKJ8XJ.js";import"./Be98tHGm.js";const de={wrapper:"w-full relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium",description:"mt-1 text-sm leading-4 opacity-90",actions:"flex items-center gap-2 mt-3 flex-shrink-0",shadow:"",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",icon:{base:"flex-shrink-0 w-5 h-5"},avatar:{base:"flex-shrink-0 self-center",size:"md"},color:{white:{solid:"text-gray-900 dark:text-white bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{color:"white",variant:"solid",icon:null,closeButton:null,actionButton:{size:"xs",color:"primary",variant:"link"}}},w=Q(z.ui.strategy,z.ui.alert,de),ce=R({components:{UIcon:H,UAvatar:J,UButton:I},inheritAttrs:!1,props:{title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>w.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>w.default.closeButton},actions:{type:Array,default:()=>[]},color:{type:String,default:()=>w.default.color,validator(e){return[...z.ui.colors,...Object.keys(w.color)].includes(e)}},variant:{type:String,default:()=>w.default.variant,validator(e){return[...Object.keys(w.variant),...Object.values(w.color).flatMap(i=>Object.keys(i))].includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["close"],setup(e){const{ui:i,attrs:$}=X("alert",Y(e,"ui"),w),t=T(()=>{var _,d;const a=((d=(_=i.value.color)==null?void 0:_[e.color])==null?void 0:d[e.variant])||i.value.variant[e.variant];return N(ee(i.value.wrapper,i.value.rounded,i.value.shadow,i.value.padding,a==null?void 0:a.replaceAll("{color}",e.color)),e.class)});function C(a){a.click&&a.click()}return{ui:i,attrs:$,alertClass:t,onAction:C,twMerge:N}}});function ue(e,i,$,t,C,a){const _=H,d=J,y=I;return r(),p("div",O({class:e.alertClass},e.attrs),[s("div",{class:b(["flex",[e.ui.gap,{"items-start":e.description||e.$slots.description,"items-center":!e.description&&!e.$slots.description}]])},[V(e.$slots,"icon",{icon:e.icon},()=>[e.icon?(r(),k(_,{key:0,name:e.icon,ui:e.ui.icon.base},null,8,["name","ui"])):u("",!0)]),V(e.$slots,"avatar",{avatar:e.avatar},()=>[e.avatar?(r(),k(d,O({key:0},{size:e.ui.avatar.size,...e.avatar},{class:e.ui.avatar.base}),null,16,["class"])):u("",!0)]),s("div",{class:b(e.ui.inner)},[e.title||e.$slots.title?(r(),p("p",{key:0,class:b(e.ui.title)},[V(e.$slots,"title",{title:e.title},()=>[v(q(e.title),1)])],2)):u("",!0),e.description||e.$slots.description?(r(),p("p",{key:1,class:b(e.twMerge(e.ui.description,!(e.title&&e.$slots.title)&&"mt-0 leading-5"))},[V(e.$slots,"description",{description:e.description},()=>[v(q(e.description),1)])],2)):u("",!0),(e.description||e.$slots.description)&&e.actions.length?(r(),p("div",{key:2,class:b(e.ui.actions)},[(r(!0),p(L,null,E(e.actions,(f,x)=>(r(),k(y,O({key:x,ref_for:!0},{...e.ui.default.actionButton||{},...f},{onClick:B(S=>e.onAction(f),["stop"])}),null,16,["onClick"]))),128))],2)):u("",!0)],2),e.closeButton||!e.description&&!e.$slots.description&&e.actions.length?(r(),p("div",{key:0,class:b(e.twMerge(e.ui.actions,"mt-0"))},[!e.description&&!e.$slots.description&&e.actions.length?(r(!0),p(L,{key:0},E(e.actions,(f,x)=>(r(),k(y,O({key:x,ref_for:!0},{...e.ui.default.actionButton||{},...f},{onClick:B(S=>e.onAction(f),["stop"])}),null,16,["onClick"]))),128)):u("",!0),e.closeButton?(r(),k(y,O({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{onClick:i[0]||(i[0]=B(f=>e.$emit("close"),["stop"]))}),null,16)):u("",!0)],2)):u("",!0)],2)],16)}const pe=K(ce,[["render",ue]]),fe={class:"w-screen h-screen flex flex-col justify-center items-center p-4"},ge={class:"max-w-screen-xl flex flex-1 w-full max-h-[900px] overflow-hidden rounded-3xl bg-red-500 border-2 border-gray-500/50"},me={class:"flex-1 mx-auto w-full relative flex"},ye={class:"-z-0 absolute top-0 left-0 w-full h-full overflow-visible bg-blue-500"},ve={class:"z-[1] flex-1 flex flex-row"},we={class:"w-0 lg:w-2/3 flex flex-col justify-end"},he={class:"h-[100px] pb-6 pl-8 flex items-center bg-gradient-to-t from-gray-950 to-transparent"},ke={class:"w-full md:w-1/2 lg:w-1/3 flex flex-col justify-between bg-gray-50 dark:bg-gray-950 p-8"},_e={key:0,class:"flex flex-col gap-4"},be={class:"flex justify-end"},$e={class:"flex justify-center"},xe={class:"text-gray-600 dark:text-gray-300"},Pe={key:1,class:"flex flex-col gap-4"},je={class:"flex gap-4"},Oe={class:"flex-1"},Ce={class:"flex justify-end"},Ve={key:1,class:"flex justify-end"},Se={key:2,class:"flex flex-col gap-4"},Be={class:"flex justify-end"},Ue={class:"flex gap-4"},Re=R({__name:"login",setup(e){ne({title:"Login",description:"Login to access Hatofit"});const i=oe(),$=te(),t=le({email:"",password:"",otp:""}),C=()=>{i.signIn("credentials",{redirect:!0,callbackUrl:"/dashboard"},{email:t.email,password:t.password})},a=T(()=>$.query.error==="undefined"?void 0:$.query.error),_=T(()=>a.value==="CredentialsSignin"?"Invalid email or password.":["Wrong email or password","User not found"].includes(a.value||"")?a.value:"Something went wrong, please try again later."),d=U("login"),y=U(!1),f=U(!1),x=async()=>{const m=await $fetch(A.Auth.ForgotPasswordSendOTP.url(t.email),{method:"POST"});console.log(m),y.value=!0},S=async()=>{try{const m=await $fetch(A.Auth.ForgotPasswordVerifyOTP.url(),{method:"POST",body:JSON.stringify({email:t.email,code:t.otp})});console.log(m),f.value=!0,d.value="forgot_new_password"}catch(m){console.log(m),alert("Invalid OTP"),f.value=!1,y.value=!1}},D=async()=>{try{const m=await $fetch(A.Auth.ForgotPasswordReset.url(),{method:"POST",body:JSON.stringify({email:t.email,code:t.otp,password:t.password})});console.log(m),alert("Password has been reset, please login with your new password."),f.value=!0,d.value="login"}catch(m){console.log(m),alert("Invalid OTP"),f.value=!1,y.value=!1}};return(m,n)=>{const F=Z,h=I,M=se,G=pe,P=re,j=ae,W=ie;return r(),p("div",fe,[s("div",ge,[s("div",me,[s("div",ye,[l(F,{src:"/images/scene/braden-collum-9HI8UJMSdZA-unsplash.jpg",alt:"Login",loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:"center"}})]),s("div",ve,[s("div",we,[s("div",he,[l(F,{src:"/images/logo/secondary-dark.png",alt:"Hatofit Logo",loading:"lazy",style:{width:"auto",height:"100%"}})])]),s("div",ke,[s("div",null,[l(M,{to:"/"},{default:c(()=>[l(h,{variant:"link",color:"primary",icon:"i-heroicons-arrow-left"},{default:c(()=>[v("back")]),_:1})]),_:1})]),o(d)==="login"?(r(),p("div",_e,[o(a)?(r(),k(G,{key:0,icon:"i-heroicons-information-circle",color:"primary",variant:"solid",title:"Error",description:o(_)},null,8,["description"])):u("",!0),l(j,{label:"Email",required:""},{default:c(()=>[l(P,{color:o(a)?"primary":"gray",modelValue:o(t).email,"onUpdate:modelValue":n[0]||(n[0]=g=>o(t).email=g),type:"email",placeholder:"you@example.com",icon:"i-heroicons-envelope"},null,8,["color","modelValue"])]),_:1}),l(j,{label:"Password",required:""},{default:c(()=>[l(P,{color:o(a)?"primary":"gray",modelValue:o(t).password,"onUpdate:modelValue":n[1]||(n[1]=g=>o(t).password=g),type:"password",placeholder:"your secret password",icon:"i-heroicons-lock-closed"},null,8,["color","modelValue"]),l(h,{variant:"link",class:"text-xs float-right",label:"Forgot Password?",onClick:n[2]||(n[2]=g=>d.value="forgot")})]),_:1}),s("div",be,[l(h,{variant:"solid",class:"w-full flex justify-center",size:"lg",onClick:C},{default:c(()=>[v("Login")]),_:1})]),s("div",$e,[s("p",xe,[l(M,{to:"/auth/register",class:"text-primary-500"},{default:c(()=>[v("register")]),_:1}),v(" if you don't have an account. ")])])])):o(d)==="forgot"?(r(),p("div",Pe,[l(j,{label:"Email",required:""},{default:c(()=>[s("div",je,[s("div",Oe,[l(P,{color:o(a)?"primary":"gray",modelValue:o(t).email,"onUpdate:modelValue":n[3]||(n[3]=g=>o(t).email=g),type:"email",placeholder:"you@example.com",icon:"i-heroicons-envelope"},null,8,["color","modelValue"])]),s("div",null,[l(h,{size:"sm",variant:"solid",class:"w-full flex justify-center",onClick:x},{default:c(()=>[v("Send OTP")]),_:1}),s("div",Ce,[l(h,{variant:"link",class:"text-xs",label:"Want To Login?",onClick:n[4]||(n[4]=g=>d.value="login")})])])])]),_:1}),o(y)?(r(),k(j,{key:0,label:"OTP",required:""},{default:c(()=>[l(P,{color:o(a)?"primary":"gray",modelValue:o(t).otp,"onUpdate:modelValue":n[5]||(n[5]=g=>o(t).otp=g),type:"text",placeholder:"OTP",icon:"i-heroicons-key"},null,8,["color","modelValue"])]),_:1})):u("",!0),o(y)?(r(),p("div",Ve,[l(h,{variant:"solid",class:"w-full flex justify-center",size:"lg",onClick:S},{default:c(()=>[v("Verify")]),_:1})])):u("",!0)])):o(d)==="forgot_new_password"?(r(),p("div",Se,[l(j,{label:"New Password",required:""},{default:c(()=>[l(P,{color:o(a)?"primary":"gray",modelValue:o(t).password,"onUpdate:modelValue":n[6]||(n[6]=g=>o(t).password=g),type:"password",placeholder:"your secret password",icon:"i-heroicons-lock-closed"},null,8,["color","modelValue"])]),_:1}),s("div",Be,[l(h,{variant:"solid",class:"w-full flex justify-center",size:"lg",onClick:D},{default:c(()=>[v("Reset Password")]),_:1})])])):u("",!0),s("div",null,[s("div",Ue,[l(W)])])])])])])])}}});export{Re as default};
